### 线程
<pre>
    1,线程是轻量级进程,也有pcb
    2,内核看线程和进程是一样的,但他们pcb指向的三级页表是相同的
    3,进程可以退化成线程
    4,线程可以看做是寄存器和栈的集合
    5,linux下线程是最小执行单位,进程是最小分配资源单位
    6,查看线程命令 ps -Lf pid
</pre>

## 线程共享资源情况
### 共享资源
<pre>
    1,文件描述符
    2,每种信号的处理方式
    3,当前目录
    4,用户id和组id
    5,内存地址空间(.text/.data/.bss/.heap/共享库)
</pre>

### 非共享资源
<pre>
    1,线程id
    2,处理器现场和栈指针(内核栈)
    3,独立的栈空间
    4,errno变量
    5,信号屏蔽字
    6,调度优先度
</pre>

### 优点
<pre>
    1,提高程序并发性
    2,开销小
    3,数据通信,共享数据方便
</pre>

### 缺点
<pre>
    1,函数库,不稳定
    2,调试,编写困难,gdb不支持
    3,对信号支持不好
</pre>


### 线程分离 pthread_detach
<pre>
    线程分离,线程结束不会再系统残留资源,没有僵尸线程
    线程分离后,pthread_join函数不会阻塞等待
</pre>

### 杀死线程 pthread_cancel
<pre>
    杀死线程,线程返回值-1
    线程杀死不是实时的,有一定的延时,需要到达线程的的某个点
    线程中有某些系统调用时,才能被杀死,read,write
    pthread_testcancel()使线程到达取消点
</pre>
